(this.webpackJsonpgreenfeshmanager=this.webpackJsonpgreenfeshmanager||[]).push([[0],{179:function(e,t,a){e.exports=a(353)},184:function(e,t,a){},253:function(e,t,a){},266:function(e,t,a){},351:function(e,t,a){},353:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),l=(a(184),a(36)),s=a(37),i=a(39),u=a(38),m=a(40),p=a(41),f=a(28),g=a(52),h=a(46),d=a.n(h),E=a(89),b=a.n(E),O={API_URL:"https://greenfesh.herokuapp.com"},y=a(90),S=a.n(y),v=a(354),j=a(357),A=a(15),k=a(355),T=a(356),I=a(133),w={AUTHENTICATED_USER:"AUTHENTICATED_USER",IS_AUTHENTICATED:"IS_AUTHENTICATED",IS_LOGOUT:"IS_LOGOUT"};function U(e){return{type:w.IS_AUTHENTICATED,payload:e}}var L=v.a.Header,N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLogOut=function(){localStorage.removeItem("token"),a.props.isLogOut()},a.onToggle=function(){a.props.onToggle()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{style:{background:"#fff",padding:0}},r.a.createElement(k.a,null,r.a.createElement(T.a,{xs:{span:18},lg:{span:22}},r.a.createElement(A.a,{className:"trigger",style:{fontSize:20,marginLeft:16},type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:this.onToggle})),r.a.createElement(T.a,{xs:{span:6},lg:{span:2}},r.a.createElement(I.a,{type:"dashed",onClick:this.onLogOut},"Sign Out")))))}}]),t}(n.Component),_={isLogOut:function(e){return{type:w.IS_LOGOUT,payload:e}}},C=Object(p.b)(null,_)(N),x=[{state:"homepage",path:"/homepage",name:"Homepage",component:r.a.lazy((function(){return a.e(3).then(a.bind(null,362))})),resources:[]}],R=r.a.lazy((function(){return a.e(4).then(a.bind(null,363))})),D=[].concat(x,[{state:"staffmanager",path:"/staffmanager",name:"Staffmanager",component:R,resources:[]}]);var H=D=function e(t){try{return t.length&&t.forEach((function(a){a.resources&&a.resources.length&&(t=t.concat(e(a.resources)))})),t}catch(a){}}(D),M=(a(253),v.a.Sider),z=v.a.Content,P=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!0,isMobile:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{style:{height:"100vh"}},r.a.createElement(M,{breakpoint:"sm",trigger:null,theme:"dark",collapsedWidth:this.state.isMobile?"80px":"0px",collapsible:!0,collapsed:this.state.collapsed,onBreakpoint:function(){console.log("break point"),e.setState({isMobile:!e.state.isMobile})}},r.a.createElement(f.b,{style:{display:"flex",alignItems:"center"},className:"header-sider",to:"/"},r.a.createElement("i",{className:"logo-greenfesh"}),r.a.createElement("strong",{className:"title-app",style:{fontSize:"".concat(this.state.collapsed?"0":"16px")}},"MANAGER APP")),r.a.createElement(j.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"]},r.a.createElement(j.a.Item,{key:"1"},r.a.createElement(f.b,{to:"/"},r.a.createElement(A.a,{type:"home",style:{fontSize:"18px"}}),r.a.createElement("span",null,"Trang ch\u1ee7"))),r.a.createElement(j.a.Item,{key:"2"},r.a.createElement(f.b,{to:"/staffmanager"},r.a.createElement(A.a,{type:"history",style:{fontSize:"18px"}}),r.a.createElement("span",null,"L\u1ecbch s\u1eed"))),r.a.createElement(j.a.Item,{key:"3"},r.a.createElement(f.b,{to:"/staffmanager"},r.a.createElement(A.a,{type:"user",style:{fontSize:"18px"}}),r.a.createElement("span",null,"Nh\xe2n vi\xean"))),r.a.createElement(j.a.Item,{key:"4"},r.a.createElement(A.a,{type:"upload",style:{fontSize:"18px"}}),r.a.createElement("span",null,"nav 3")))),r.a.createElement(v.a,null,r.a.createElement(C,{collapsed:this.state.collapsed,onToggle:this.toggle}),r.a.createElement(z,{style:{margin:"24px 16px",padding:24,background:"#fff",minHeight:100}},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(g.d,null,H.map((function(e,t){return e.component?r.a.createElement(g.b,{key:t,path:e.path,exact:e.exact,name:e.name,render:function(t){return r.a.createElement(e.component,t)}}):null})),r.a.createElement(g.a,{to:"/homepage"})))))))}}]),t}(n.Component);var F=Object(p.b)((function(e){return{}}),{})(P),G=a(95),J=a(361),X=a(358),B=a(359),W=a(360),V=a(131),q=a.n(V),K=(a(266),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).isAuthenticatedUser=function(e){var t;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.awrap(b()({url:"".concat(O.API_URL,"/listStaff"),method:"GET",data:{}}));case 2:(t=n.sent)&&t.data.forEach((function(t){e.username.toLowerCase()===t.nameUserLogin.toLowerCase()&&(q()(e.password)===t.passUserLogin?(a.props.isAuthenticated({staff:t}),localStorage.setItem("token",JSON.stringify(t.token)),J.a.open({message:r.a.createElement("div",{style:{fontWeight:"500",color:"#45b5aa"}},"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng"),description:"Ch\xe0o m\u1eebng \u0111\u1ebfn \u1ee9ng d\u1ee5ng GreenFesh Manager !"})):q()(e.password)!==t.passUserLogin&&J.a.open({message:"B\u1ea1n \u0111\xe3 \u0111\u0103ng nh\u1eadp sai !",description:"B\u1ea1n \u0111\xe3 nh\u1eadp sai t\xean ho\u1eb7c m\u1eadt kh\u1ea9u !"}))}));case 4:case"end":return n.stop()}}))},a.onChange=function(e){var t=e.target,n=t.name,r=void 0===n?"":n,o=t.value,c=void 0===o?"":o;a.setState(Object(G.a)({},r,c))},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||a.isAuthenticatedUser(t)}))},a.state={nameUserLogin:"",passUserLogin:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"warraper-login"},r.a.createElement("i",{className:"logo-login"}),r.a.createElement(X.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("div",{style:{textAlign:"center",fontSize:20,fontWeight:"bold"}},"\u0110\u0103ng nh\u1eadp"),r.a.createElement(X.a.Item,null,e("username",{rules:[{required:!0,message:"Xin vui l\xf2ng nh\u1eadp t\xean"}]})(r.a.createElement(B.a,{name:"nameStaff",onChange:this.onChange,prefix:r.a.createElement(A.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(X.a.Item,null,e("password",{rules:[{required:!0,message:"Xin vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"}]})(r.a.createElement(B.a,{name:"passStaff",onChange:this.onChange,prefix:r.a.createElement(A.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(X.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(W.a,null,"Remember me")),r.a.createElement(f.b,{className:"login-form-forgot",to:"/"},"Forgot password"),r.a.createElement(I.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or ",r.a.createElement(f.b,{to:"/"},"register now!"))))}}]),t}(n.Component)),$=X.a.create({name:"login"})(K);var Q={onAuthenticatedUser:function(e){return{type:w.AUTHENTICATED_USER,payload:e}},isAuthenticated:U},Y=Object(p.b)((function(e){return{listStaff:e.LayoutReducer.loginReducer.listStaff}}),Q)($),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isAuthenticatedUser=function(){var e;return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(b()({url:"".concat(O.API_URL,"/listStaff"),method:"GET",data:{}}));case 2:(e=t.sent)&&e.data.forEach((function(e){e.passUserLogin===JSON.parse(localStorage.getItem("userLogin"))&&a.props.isAuthenticated({staff:e})}));case 4:case"end":return t.stop()}}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(JSON.parse(localStorage.getItem("token")))if(JSON.parse(localStorage.getItem("token")).message)localStorage.removeItem("token");else if(S()(JSON.parse(localStorage.getItem("token"))).nameStaff){var e=S()(JSON.parse(localStorage.getItem("token")));this.props.isAuthenticated({staff:e})}}},{key:"render",value:function(){var e=this.props.isAuth,t=void 0!==e&&e;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(F,null):r.a.createElement(Y,null))}}]),t}(n.Component);var ee={isAuthenticated:U},te=Object(g.g)(Object(p.b)((function(e){return{isAuth:e.LayoutReducer.loginReducer.isAuth}}),ee)(Z)),ae=a(32),ne=a(173),re=a(174),oe=d.a.mark(ce);function ce(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.a)([]);case 2:case"end":return e.stop()}}),oe)}var le,se=a(172),ie=a(100),ue={listStaff:[],staff:{id:0,nameStaff:"",passUserLogin:"",nameUserLogin:""},isAuth:!1},me=Object(ae.c)({loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.AUTHENTICATED_USER:return Object(ie.a)(e,(function(e){e.listStaff=t.payload.listStaff}));case w.IS_AUTHENTICATED:return Object(ie.a)(e,(function(e){e.isAuth=!0,e.staff=t.payload.staff}));case w.IS_LOGOUT:return Object(ie.a)(e,(function(e){e.isAuth=!1}));default:return Object(se.a)({},e)}}}),pe=Object(ae.c)({LayoutReducer:me}),fe=Object(ne.a)(),ge="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):ae.d;le=Object(ae.e)(pe,ge(Object(ae.a)(fe))),fe.run(ce);var he=le,de=(a(351),a(352),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{store:he},r.a.createElement(f.a,null,r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",name:"Home",component:te})))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[179,1,2]]]);
//# sourceMappingURL=main.83c47b9c.chunk.js.map